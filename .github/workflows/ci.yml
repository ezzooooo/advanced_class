# 3ì£¼ì°¨: CI/CD íŒŒì´í”„ë¼ì¸ - GitHub Actions ì„¤ì •
# GitHub ActionsëŠ” GitHubì—ì„œ ì œê³µí•˜ëŠ” CI/CD í”Œë«í¼ì…ë‹ˆë‹¤.
# ì´ íŒŒì¼ì€ YAML í˜•ì‹ìœ¼ë¡œ ì‘ì„±ë˜ë©°, ì›Œí¬í”Œë¡œìš°ì˜ ì‹¤í–‰ ì¡°ê±´ê³¼ ë‹¨ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
#
# ì´ workflowëŠ” PRì´ë‚˜ push ì‹œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
# - ì½”ë“œ ë¶„ì„ (flutter analyze): ì •ì  ë¶„ì„ì„ í†µí•œ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
# - í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (flutter test): ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
# - ë¹Œë“œ ê²€ì¦ (flutter build): ì‹¤ì œ ë¹Œë“œê°€ ì„±ê³µí•˜ëŠ”ì§€ í™•ì¸

# ì›Œí¬í”Œë¡œìš°ì˜ ì´ë¦„ì„ ì •ì˜í•©ë‹ˆë‹¤. GitHub Actions UIì—ì„œ ì´ ì´ë¦„ì´ í‘œì‹œë©ë‹ˆë‹¤.
name: Flutter CI

# ì›Œí¬í”Œë¡œìš°ê°€ ì–¸ì œ ì‹¤í–‰ë ì§€ ì •ì˜í•˜ëŠ” ì„¹ì…˜ì…ë‹ˆë‹¤.
# on í‚¤ì›Œë“œëŠ” íŠ¸ë¦¬ê±° ì´ë²¤íŠ¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
on:
  # pull_request: Pull Requestê°€ ìƒì„±ë˜ê±°ë‚˜ ì—…ë°ì´íŠ¸ë  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
  # branches: íŠ¹ì • ë¸Œëœì¹˜ì— ëŒ€í•œ PRë§Œ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.
  pull_request:
    branches:
      - main      # main ë¸Œëœì¹˜ë¡œì˜ PR
      - develop   # develop ë¸Œëœì¹˜ë¡œì˜ PR

  # push: ì½”ë“œê°€ íŠ¹ì • ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
  # branches: ì§€ì •ëœ ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œë§Œ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.
  push:
    branches:
      - main      # main ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ
      - develop   # develop ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ

# ë™ì‹œ ì‹¤í–‰ ì œì–´ ì„¤ì •ì…ë‹ˆë‹¤.
# ê°™ì€ ë¸Œëœì¹˜ë‚˜ PRì— ëŒ€í•´ ì—¬ëŸ¬ ì›Œí¬í”Œë¡œìš°ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.
concurrency:
  # group: ë™ì‹œ ì‹¤í–‰ì„ ê·¸ë£¹í™”í•˜ëŠ” í‚¤ì…ë‹ˆë‹¤.
  # github.workflow: ì›Œí¬í”Œë¡œìš° ì´ë¦„ (ì˜ˆ: "Flutter CI")
  # github.ref: ë¸Œëœì¹˜ë‚˜ PR ì°¸ì¡° (ì˜ˆ: "refs/pull/123/merge")
  # ê°™ì€ ê·¸ë£¹ì˜ ì›Œí¬í”Œë¡œìš°ëŠ” ë™ì‹œì— í•˜ë‚˜ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
  group: ${{ github.workflow }}-${{ github.ref }}
  
  # cancel-in-progress: ìƒˆë¡œìš´ ì‹¤í–‰ì´ ì‹œì‘ë˜ë©´ ì§„í–‰ ì¤‘ì¸ ì´ì „ ì‹¤í–‰ì„ ì·¨ì†Œí•©ë‹ˆë‹¤.
  # ì´ë ‡ê²Œ í•˜ë©´ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  cancel-in-progress: true

# ì‹¤í–‰í•  ì‘ì—…(job)ë“¤ì„ ì •ì˜í•˜ëŠ” ì„¹ì…˜ì…ë‹ˆë‹¤.
# ê° jobì€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, ë³‘ë ¬ ë˜ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
jobs:
  # ===================
  # ë¶„ì„ ë° í…ŒìŠ¤íŠ¸ Job
  # ===================
  # ì²« ë²ˆì§¸ job: ì½”ë“œ ë¶„ì„ê³¼ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  # ë‹¤ë¥¸ ë¹Œë“œ jobë“¤ì€ ì´ jobì´ ì„±ê³µí•œ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
  analyze-and-test:
    # jobì˜ í‘œì‹œ ì´ë¦„ì…ë‹ˆë‹¤. GitHub Actions UIì—ì„œ ë³´ì´ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.
    name: ë¶„ì„ & í…ŒìŠ¤íŠ¸
    
    # runs-on: jobì´ ì‹¤í–‰ë  ê°€ìƒ ë¨¸ì‹ ì˜ ìš´ì˜ì²´ì œë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
    # ubuntu-latest: ìµœì‹  Ubuntu ë²„ì „ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    runs-on: ubuntu-latest

    # steps: ì´ jobì—ì„œ ì‹¤í–‰í•  ë‹¨ê³„ë“¤ì„ ì •ì˜í•©ë‹ˆë‹¤.
    # ê° stepì€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ jobì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
    steps:
      # Step 1: ì½”ë“œ ì²´í¬ì•„ì›ƒ
      # GitHub ì €ì¥ì†Œì˜ ì½”ë“œë¥¼ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ í™˜ê²½ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
      - name: ğŸ“¥ Checkout
        # uses: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì•¡ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
        # actions/checkout@v4: GitHubì˜ ê³µì‹ ì²´í¬ì•„ì›ƒ ì•¡ì…˜ (v4 ë²„ì „)
        # ì´ ì•¡ì…˜ì€ ì €ì¥ì†Œì˜ ì½”ë“œë¥¼ $GITHUB_WORKSPACEì— ì²´í¬ì•„ì›ƒí•©ë‹ˆë‹¤.
        uses: actions/checkout@v4

      # Step 2: Flutter í™˜ê²½ ì„¤ì •
      # Flutter SDKë¥¼ ì„¤ì¹˜í•˜ê³  í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
      - name: ğŸ¦ Setup Flutter
        # subosito/flutter-action@v2: Flutterë¥¼ ì„¤ì¹˜í•˜ëŠ” ì»¤ë®¤ë‹ˆí‹° ì•¡ì…˜ì…ë‹ˆë‹¤.
        uses: subosito/flutter-action@v2
        # with: ì•¡ì…˜ì— ì „ë‹¬í•  ì…ë ¥ íŒŒë¼ë¯¸í„°ë“¤ì…ë‹ˆë‹¤.
        with:
          # flutter-version: ì„¤ì¹˜í•  Flutterì˜ ì •í™•í•œ ë²„ì „ì„ ì§€ì •í•©ë‹ˆë‹¤.
          # ë²„ì „ì„ ê³ ì •í•˜ì—¬ ë¹Œë“œ ì¼ê´€ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.
          flutter-version: '3.38.5'
          
          # channel: Flutter ì±„ë„ì„ ì§€ì •í•©ë‹ˆë‹¤.
          # stable: ì•ˆì •ì ì¸ ë¦´ë¦¬ìŠ¤ ì±„ë„ (í”„ë¡œë•ì…˜ì— ê¶Œì¥)
          # ë‹¤ë¥¸ ì˜µì…˜: beta, dev, master
          channel: 'stable'
          
          # cache: Flutterì˜ pub ìºì‹œë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.
          # trueë¡œ ì„¤ì •í•˜ë©´ ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ ì‹œê°„ì´ ë‹¨ì¶•ë©ë‹ˆë‹¤.
          # GitHub Actionsì˜ ìºì‹œ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ë¹Œë“œ ì‹œê°„ì„ ì¤„ì…ë‹ˆë‹¤.
          cache: true

      # Step 3: ì˜ì¡´ì„± ì„¤ì¹˜
      # pubspec.yamlì— ì •ì˜ëœ íŒ¨í‚¤ì§€ ì˜ì¡´ì„±ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ì„¤ì¹˜í•©ë‹ˆë‹¤.
      - name: ğŸ“¦ Install dependencies
        # run: ì…¸ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
        # flutter pub get: pubspec.yamlì˜ dependenciesë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
        run: flutter pub get

      # Step 4: ì½”ë“œ ì •ì  ë¶„ì„
      # Dart ì½”ë“œì˜ í’ˆì§ˆì„ ê²€ì‚¬í•˜ê³  ì ì¬ì ì¸ ë¬¸ì œë¥¼ ì°¾ìŠµë‹ˆë‹¤.
      - name: ğŸ” Analyze code
        # flutter analyze: Dart ì½”ë“œë¥¼ ì •ì  ë¶„ì„í•©ë‹ˆë‹¤.
        # --fatal-infos: info ìˆ˜ì¤€ì˜ ì´ìŠˆë„ ì¹˜ëª…ì ì¸ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        #   - ê¸°ë³¸ì ìœ¼ë¡œ warningì€ ì´ë¯¸ fatalë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤ (--fatal-warnings ê¸°ë³¸ í™œì„±í™”)
        #   - infoëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë¬´ì‹œë˜ì§€ë§Œ, ì´ ì˜µì…˜ìœ¼ë¡œ ì—„ê²©í•˜ê²Œ ê²€ì‚¬í•©ë‹ˆë‹¤.
        #   - info, warning, error ì¤‘ í•˜ë‚˜ë¼ë„ ë°œê²¬ë˜ë©´ CIê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
        #   - ì½”ë“œ í’ˆì§ˆì„ ë†’ì€ ìˆ˜ì¤€ìœ¼ë¡œ ìœ ì§€í•˜ê¸° ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤.
        run: flutter analyze --fatal-info

      # Step 5: ì½”ë“œ í¬ë§·íŒ… ê²€ì‚¬
      # ì½”ë“œê°€ dart format ê·œì¹™ì„ ë”°ë¥´ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
      - name: ğŸ“ Check formatting
        # dart format: Dart ì½”ë“œ í¬ë§·í„°ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
        # --output=none: ì‹¤ì œë¡œ íŒŒì¼ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  ê²€ì‚¬ë§Œ í•©ë‹ˆë‹¤.
        # --set-exit-if-changed: í¬ë§·ì´ ë³€ê²½ë˜ë©´ (ì¦‰, í¬ë§·ì´ ë§ì§€ ì•Šìœ¼ë©´) exit code 1ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        # . : í˜„ì¬ ë””ë ‰í† ë¦¬ì™€ í•˜ìœ„ ë””ë ‰í† ë¦¬ì˜ ëª¨ë“  Dart íŒŒì¼ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.
        # í¬ë§·ì´ ë§ì§€ ì•Šìœ¼ë©´ CIê°€ ì‹¤íŒ¨í•˜ì—¬ ê°œë°œìì—ê²Œ í¬ë§·íŒ…ì„ ìš”êµ¬í•©ë‹ˆë‹¤.
        run: dart format --output=none --set-exit-if-changed .

      # Step 6: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      # í”„ë¡œì íŠ¸ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
      - name: ğŸ§ª Run tests
        # flutter test: test/ ë””ë ‰í† ë¦¬ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
        # --coverage: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì •ë³´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        #   - coverage/lcov.info íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.
        #   - ì´ íŒŒì¼ì€ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë„êµ¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        run: flutter test --coverage

      # Step 7: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ì—…ë¡œë“œ
      # ìƒì„±ëœ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ë¥¼ ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.
      - name: ğŸ“Š Upload coverage
        # codecov/codecov-action@v4: Codecov ì„œë¹„ìŠ¤ì— ì»¤ë²„ë¦¬ì§€ë¥¼ ì—…ë¡œë“œí•˜ëŠ” ì•¡ì…˜ì…ë‹ˆë‹¤.
        uses: codecov/codecov-action@v4
        # with: ì•¡ì…˜ì— ì „ë‹¬í•  íŒŒë¼ë¯¸í„°ë“¤ì…ë‹ˆë‹¤.
        with:
          # file: ì—…ë¡œë“œí•  ì»¤ë²„ë¦¬ì§€ íŒŒì¼ì˜ ê²½ë¡œì…ë‹ˆë‹¤.
          # lcov.info: LCOV í˜•ì‹ì˜ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ íŒŒì¼ì…ë‹ˆë‹¤.
          file: coverage/lcov.info
          
          # fail_ci_if_error: ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ CIë¥¼ ì‹¤íŒ¨ë¡œ ì²˜ë¦¬í• ì§€ ì—¬ë¶€ì…ë‹ˆë‹¤.
          # false: ì—…ë¡œë“œê°€ ì‹¤íŒ¨í•´ë„ CIëŠ” ê³„ì† ì§„í–‰ë©ë‹ˆë‹¤.
          # ì»¤ë²„ë¦¬ì§€ ì—…ë¡œë“œëŠ” ë¶€ê°€ ê¸°ëŠ¥ì´ë¯€ë¡œ ì‹¤íŒ¨í•´ë„ ë¹Œë“œ ìì²´ëŠ” ì„±ê³µí•´ì•¼ í•©ë‹ˆë‹¤.
          fail_ci_if_error: false
        
        # continue-on-error: ì´ stepì´ ì‹¤íŒ¨í•´ë„ ë‹¤ìŒ stepìœ¼ë¡œ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤.
        # fail_ci_if_error: falseì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì´ì¤‘ìœ¼ë¡œ ë³´í˜¸í•©ë‹ˆë‹¤.
        continue-on-error: true

  # ===================
  # Android ë¹Œë“œ Job
  # ===================
  # ë‘ ë²ˆì§¸ job: Android APKë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.
  # analyze-and-test jobì´ ì„±ê³µí•œ í›„ì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
  build-android:
    # jobì˜ í‘œì‹œ ì´ë¦„ì…ë‹ˆë‹¤.
    name: Android ë¹Œë“œ
    
    # ubuntu-latest: Android ë¹Œë“œëŠ” Linux í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    runs-on: ubuntu-latest
    
    # needs: ì´ jobì´ ì‹¤í–‰ë˜ê¸° ì „ì— ì™„ë£Œë˜ì–´ì•¼ í•˜ëŠ” jobì„ ì§€ì •í•©ë‹ˆë‹¤.
    # analyze-and-test: ë¶„ì„ê³¼ í…ŒìŠ¤íŠ¸ê°€ ëª¨ë‘ í†µê³¼í•œ í›„ì—ë§Œ ë¹Œë“œë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
    # ì´ë ‡ê²Œ í•˜ë©´ ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œëŠ” ë¹Œë“œí•˜ì§€ ì•Šì•„ ë¦¬ì†ŒìŠ¤ë¥¼ ì ˆì•½í•©ë‹ˆë‹¤.
    needs: analyze-and-test

    steps:
      # Step 1: ì½”ë“œ ì²´í¬ì•„ì›ƒ
      # ì €ì¥ì†Œ ì½”ë“œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      # Step 2: Java í™˜ê²½ ì„¤ì •
      # Android ë¹Œë“œì—ëŠ” Javaê°€ í•„ìš”í•©ë‹ˆë‹¤.
      - name: â˜• Setup Java
        # actions/setup-java@v4: Javaë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³µì‹ ì•¡ì…˜ì…ë‹ˆë‹¤.
        uses: actions/setup-java@v4
        with:
          # distribution: Java ë°°í¬íŒì„ ì§€ì •í•©ë‹ˆë‹¤.
          # zulu: Azul Zulu OpenJDK (ì•ˆì •ì ì´ê³  ë„ë¦¬ ì‚¬ìš©ë¨)
          distribution: 'zulu'
          
          # java-version: ì„¤ì¹˜í•  Java ë²„ì „ì…ë‹ˆë‹¤.
          # '17': Java 17 (Android Gradle Pluginì´ ìš”êµ¬í•˜ëŠ” ë²„ì „)
          java-version: '17'

      # Step 3: Flutter í™˜ê²½ ì„¤ì •
      # analyze-and-testì™€ ë™ì¼í•œ Flutter ë²„ì „ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
      - name: ğŸ¦ Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          channel: 'stable'
          cache: true

      # Step 4: ì˜ì¡´ì„± ì„¤ì¹˜
      - name: ğŸ“¦ Install dependencies
        run: flutter pub get

      # Step 5: Android APK ë¹Œë“œ
      # ì‹¤ì œ Android ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
      - name: ğŸ¤– Build Android APK
        # flutter build apk: Android APK íŒŒì¼ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
        # --debug: ë””ë²„ê·¸ ëª¨ë“œë¡œ ë¹Œë“œí•©ë‹ˆë‹¤.
        #   - ë””ë²„ê·¸ ë¹Œë“œëŠ” ì„œëª…ì´ í•„ìš” ì—†ê³  ë¹ ë¥´ê²Œ ë¹Œë“œë©ë‹ˆë‹¤.
        #   - CIì—ì„œëŠ” ë¹Œë“œê°€ ì„±ê³µí•˜ëŠ”ì§€ë§Œ í™•ì¸í•˜ë©´ ë˜ë¯€ë¡œ ë””ë²„ê·¸ ë¹Œë“œë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.
        #   - ë¦´ë¦¬ìŠ¤ ë¹Œë“œëŠ” ë³„ë„ì˜ ì›Œí¬í”Œë¡œìš°ì—ì„œ ì„œëª…ê³¼ í•¨ê»˜ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.
        run: flutter build apk --debug

      # Step 6: ë¹Œë“œ ê²°ê³¼ë¬¼ ì—…ë¡œë“œ
      # ìƒì„±ëœ APK íŒŒì¼ì„ GitHub Actions ì•„í‹°íŒ©íŠ¸ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
      - name: ğŸ“¤ Upload APK
        # actions/upload-artifact@v4: íŒŒì¼ì„ GitHub Actions ì•„í‹°íŒ©íŠ¸ë¡œ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
        uses: actions/upload-artifact@v4
        with:
          # name: ì•„í‹°íŒ©íŠ¸ì˜ ì´ë¦„ì…ë‹ˆë‹¤. GitHub UIì—ì„œ ì´ ì´ë¦„ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          name: android-apk-debug
          
          # path: ì—…ë¡œë“œí•  íŒŒì¼ì˜ ê²½ë¡œì…ë‹ˆë‹¤.
          # build/app/outputs/flutter-apk/app-debug.apk: Flutterê°€ ìƒì„±í•˜ëŠ” ë””ë²„ê·¸ APKì˜ ê¸°ë³¸ ê²½ë¡œì…ë‹ˆë‹¤.
          path: build/app/outputs/flutter-apk/app-debug.apk
          
          # retention-days: ì•„í‹°íŒ©íŠ¸ë¥¼ ë³´ê´€í•  ì¼ìˆ˜ì…ë‹ˆë‹¤.
          # 7: 7ì¼ í›„ ìë™ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤.
          # ì•„í‹°íŒ©íŠ¸ëŠ” ì €ì¥ ê³µê°„ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì˜¤ë˜ ë³´ê´€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
          retention-days: 7

  # ===================
  # iOS ë¹Œë“œ Job (ì„ íƒ)
  # ===================
  # ì„¸ ë²ˆì§¸ job: iOS ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
  # iOS ë¹Œë“œëŠ” macOS í™˜ê²½ì—ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
  build-ios:
    name: iOS ë¹Œë“œ
    
    # macos-latest: iOS ë¹Œë“œëŠ” macOS í™˜ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤.
    # macOS ëŸ¬ë„ˆëŠ” Linuxë³´ë‹¤ ë¹„ìš©ì´ ë¹„ì‹¸ë¯€ë¡œ í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
    runs-on: macos-latest
    
    # analyze-and-testê°€ ì„±ê³µí•œ í›„ì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    needs: analyze-and-test

    steps:
      # Step 1: ì½”ë“œ ì²´í¬ì•„ì›ƒ
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      # Step 2: Flutter í™˜ê²½ ì„¤ì •
      - name: ğŸ¦ Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          channel: 'stable'
          cache: true

      # Step 3: ì˜ì¡´ì„± ì„¤ì¹˜
      - name: ğŸ“¦ Install dependencies
        run: flutter pub get

      # Step 4: iOS ë¹Œë“œ
      # iOS ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
      - name: ğŸ Build iOS (no codesign)
        # flutter build ios: iOS ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
        # --debug: ë””ë²„ê·¸ ëª¨ë“œë¡œ ë¹Œë“œí•©ë‹ˆë‹¤.
        # --no-codesign: ì½”ë“œ ì„œëª…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        #   - CI í™˜ê²½ì—ì„œëŠ” Apple ê°œë°œì ê³„ì •ì´ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        #   - ì½”ë“œ ì„œëª… ì—†ì´ë„ ë¹Œë“œê°€ ì„±ê³µí•˜ëŠ”ì§€ë§Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        #   - ì‹¤ì œ ë°°í¬ë¥¼ ìœ„í•´ì„œëŠ” ë³„ë„ì˜ ì„œëª… ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
        run: flutter build ios --debug --no-codesign

  # ===================
  # Web ë¹Œë“œ Job
  # ===================
  # ë„¤ ë²ˆì§¸ job: Web ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
  # Web ë¹Œë“œëŠ” Linux í™˜ê²½ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.
  build-web:
    name: Web ë¹Œë“œ
    
    # ubuntu-latest: Web ë¹Œë“œëŠ” Linuxì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    runs-on: ubuntu-latest
    
    # analyze-and-testê°€ ì„±ê³µí•œ í›„ì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    needs: analyze-and-test

    steps:
      # Step 1: ì½”ë“œ ì²´í¬ì•„ì›ƒ
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4

      # Step 2: Flutter í™˜ê²½ ì„¤ì •
      - name: ğŸ¦ Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          channel: 'stable'
          cache: true

      # Step 3: ì˜ì¡´ì„± ì„¤ì¹˜
      - name: ğŸ“¦ Install dependencies
        run: flutter pub get

      # Step 4: Web ë¹Œë“œ
      # Web ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
      - name: ğŸŒ Build Web
        # flutter build web: Web ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
        # --release: ë¦´ë¦¬ìŠ¤ ëª¨ë“œë¡œ ë¹Œë“œí•©ë‹ˆë‹¤.
        #   - ë¦´ë¦¬ìŠ¤ ë¹Œë“œëŠ” ìµœì í™”ë˜ì–´ ìˆê³  í”„ë¡œë•ì…˜ì— ì í•©í•©ë‹ˆë‹¤.
        #   - Webì€ ë””ë²„ê·¸ ë¹Œë“œì™€ ë¦´ë¦¬ìŠ¤ ë¹Œë“œì˜ ì°¨ì´ê°€ í½ë‹ˆë‹¤.
        run: flutter build web --release

      # Step 5: Web ë¹Œë“œ ê²°ê³¼ë¬¼ ì—…ë¡œë“œ
      # ìƒì„±ëœ Web ë¹Œë“œ íŒŒì¼ë“¤ì„ ì•„í‹°íŒ©íŠ¸ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
      - name: ğŸ“¤ Upload Web build
        uses: actions/upload-artifact@v4
        with:
          # name: ì•„í‹°íŒ©íŠ¸ ì´ë¦„ì…ë‹ˆë‹¤.
          name: web-build
          
          # path: ì—…ë¡œë“œí•  ë””ë ‰í† ë¦¬ ê²½ë¡œì…ë‹ˆë‹¤.
          # build/web: Flutterê°€ ìƒì„±í•˜ëŠ” Web ë¹Œë“œ ì¶œë ¥ ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
          # ë””ë ‰í† ë¦¬ ì „ì²´ë¥¼ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
          path: build/web
          
          # retention-days: 7ì¼ í›„ ìë™ ì‚­ì œë©ë‹ˆë‹¤.
          retention-days: 7

